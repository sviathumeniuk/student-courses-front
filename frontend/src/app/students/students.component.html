<div class="container">
    <h2>Students Management</h2>
  
    <!-- Error Message Display -->
    <div *ngIf="errorMessage" class="alert alert-danger">
      {{ errorMessage }}
    </div>
  
    <!-- Loading Indicator -->
    <div *ngIf="isLoading" class="loading">
      Loading...
    </div>
  
    <!-- Filter by Group Section -->
    <div class="filter-section">
      <h3>Filter by Group</h3>
      <input type="text" [(ngModel)]="selectedGroupId" placeholder="Enter group ID">
      <button (click)="filterByGroup()">Filter</button>
      <button (click)="clearFilter()">Clear Filter</button>
    </div>
  
    <!-- Search by ID Section -->
    <div class="search-section">
      <h3>Search Student by ID</h3>
      <input type="text" [(ngModel)]="searchId" placeholder="Enter student ID">
      <button (click)="searchStudentById()">Search</button>
      <div *ngIf="searchErrorMessage" class="error">{{ searchErrorMessage }}</div>
      
      <!-- Display found student -->
      <div *ngIf="foundStudent" class="found-student">
        <h4>Found Student:</h4>
        <p>ID: {{foundStudent._id}}</p>
        <p>Name: {{foundStudent.firstname}} {{foundStudent.patronymic}} {{foundStudent.lastname}}</p>
        <p>Email: {{foundStudent.email}}</p>
        <p>Phone: {{foundStudent.phone}}</p>
        <p>Group: {{foundStudent.group}}</p>
        <p>Status: {{foundStudent.status}}</p>
      </div>
    </div>
  
    <!-- Add New Student Form -->
    <div class="add-form" *ngIf="!isEditing">
      <h3>Add New Student</h3>
      <input type="text" [(ngModel)]="newStudent.firstname" placeholder="First Name">
      <input type="text" [(ngModel)]="newStudent.lastname" placeholder="Last Name">
      <input type="text" [(ngModel)]="newStudent.patronymic" placeholder="Patronymic">
      <input type="email" [(ngModel)]="newStudent.email" placeholder="Email">
      <input type="tel" [(ngModel)]="newStudent.phone" placeholder="Phone">
      <input type="text" [(ngModel)]="newStudent.group" placeholder="Group ID">
      <input type="text" [(ngModel)]="newStudent.status" placeholder="Status">
      <button (click)="createStudent()">Add Student</button>
    </div>
  
    <!-- Edit Student Form -->
    <div class="edit-form" *ngIf="isEditing && selectedStudent">
      <h3>Edit Student</h3>
      <input type="text" [(ngModel)]="selectedStudent.firstname" placeholder="First Name">
      <input type="text" [(ngModel)]="selectedStudent.lastname" placeholder="Last Name">
      <input type="text" [(ngModel)]="selectedStudent.patronymic" placeholder="Patronymic">
      <input type="email" [(ngModel)]="selectedStudent.email" placeholder="Email">
      <input type="tel" [(ngModel)]="selectedStudent.phone" placeholder="Phone">
      <input type="text" [(ngModel)]="selectedStudent.group" placeholder="Group ID">
      <input type="text" [(ngModel)]="selectedStudent.status" placeholder="Status">
      <button (click)="updateStudent()">Update Student</button>
      <button (click)="cancelEdit()">Cancel</button>
    </div>
  
    <!-- Students List -->
    <div class="students-list">
      <h3>Students List</h3>
      <table>
        <thead>
          <tr>
            <th>ID</th>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Patronymic</th>
            <th>Email</th>
            <th>Phone</th>
            <th>Group</th>
            <th>Status</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let student of students">
            <td>{{student._id}}</td>
            <td>{{student.firstname}}</td>
            <td>{{student.lastname}}</td>
            <td>{{student.patronymic}}</td>
            <td>{{student.email}}</td>
            <td>{{student.phone}}</td>
            <td>{{student.group}}</td>
            <td>{{student.status}}</td>
            <td>
              <button (click)="editStudent(student)">Edit</button>
              <button (click)="deleteStudent(student._id)">Delete</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>